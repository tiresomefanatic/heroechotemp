{"file":"CreatePullRequest-Df8cfafm.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA,UAAM,QAAQ;AAKmB,cAAU;AASrC,UAAA,UAAU,IAAI,KAAK;AACnB,UAAA,aAAa,IAAI,MAAM;AACvB,UAAA,aAAa,IAAI,EAAE;AACnB,UAAA,QAAQ,IAAI,EAAE;AACd,UAAA,cAAc,IAAI,EAAE;AACpB,UAAA,iBAAiB,IAAI,KAAK;AAQ1B,UAAA,UAAU,SAAS,MAAM;AAE3B,aAAA,WAAW,SACX,WAAW,SACX,MAAM,MAAM,UACZ,WAAW,UAAU,WAAW;AAAA,IAAA,CAEnC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../components/CreatePullRequest.vue"],"sourcesContent":["# CreatePullRequest.vue\n<template>\n  <div class=\"create-pr-form\">\n    <h3 class=\"form-title\">Create Pull Request</h3>\n\n    <div class=\"form-group\">\n      <label for=\"base\">Base Branch</label>\n      <select\n        id=\"base\"\n        v-model=\"baseBranch\"\n        class=\"form-select\"\n        :disabled=\"loading\"\n      >\n        <option value=\"\">Select base branch</option>\n        <option v-for=\"branch in props.branches\" :key=\"branch\" :value=\"branch\">\n          {{ branch }}\n        </option>\n      </select>\n      <span class=\"helper-text\" v-if=\"!baseBranch\"\n        >This is the branch where changes will be merged into</span\n      >\n    </div>\n\n    <div class=\"form-group\">\n      <label for=\"head\">Source Branch</label>\n      <select\n        id=\"head\"\n        v-model=\"headBranch\"\n        class=\"form-select\"\n        :disabled=\"loading\"\n      >\n        <option value=\"\">Select source branch</option>\n        <option v-for=\"branch in props.branches\" :key=\"branch\" :value=\"branch\">\n          {{ branch }}\n        </option>\n      </select>\n      <span class=\"helper-text\" v-if=\"!headBranch\"\n        >This is the branch containing your changes</span\n      >\n    </div>\n\n    <div class=\"form-group\">\n      <label for=\"title\">Title</label>\n      <input\n        id=\"title\"\n        v-model=\"title\"\n        type=\"text\"\n        class=\"form-input\"\n        placeholder=\"Enter PR title\"\n        :disabled=\"loading\"\n      />\n      <span class=\"validation-error\" v-if=\"showValidation && !title.trim()\">\n        Title is required\n      </span>\n    </div>\n\n    <div class=\"form-group\">\n      <label for=\"description\">Description</label>\n      <textarea\n        id=\"description\"\n        v-model=\"description\"\n        class=\"form-textarea\"\n        placeholder=\"Enter PR description\"\n        rows=\"4\"\n        :disabled=\"loading\"\n      ></textarea>\n    </div>\n\n    <div class=\"validation-summary\" v-if=\"showValidation && !isValid\">\n      <p>Please fix the following issues:</p>\n      <ul>\n        <li v-if=\"!baseBranch\">Select a base branch</li>\n        <li v-if=\"!headBranch\">Select a source branch</li>\n        <li v-if=\"baseBranch === headBranch && baseBranch\">\n          Base and source branches must be different\n        </li>\n        <li v-if=\"!title.trim()\">Enter a title for the pull request</li>\n      </ul>\n    </div>\n\n    <div class=\"form-actions\">\n      <button\n        class=\"cancel-button\"\n        @click=\"$emit('cancel')\"\n        :disabled=\"loading\"\n      >\n        Cancel\n      </button>\n      <button\n        class=\"submit-button\"\n        @click=\"handleSubmit\"\n        :disabled=\"!isValid || loading\"\n      >\n        {{ loading ? \"Creating...\" : \"Create Pull Request\" }}\n      </button>\n    </div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted } from \"vue\";\nimport { useGithub } from \"~/composables/useGithub\";\nimport { useToast } from \"~/composables/useToast\";\n\n// Define props\nconst props = defineProps<{\n  branches: string[];\n  currentBranch: string;\n}>();\n\nconst { createNewPullRequest } = useGithub();\nconst { showToast } = useToast();\n\nconst emit = defineEmits<{\n  (e: \"created\"): void;\n  (e: \"cancel\"): void;\n}>();\n\n// Form state\nconst loading = ref(false);\nconst baseBranch = ref(\"main\");\nconst headBranch = ref(\"\");\nconst title = ref(\"\");\nconst description = ref(\"\");\nconst showValidation = ref(false);\n\n// Initialize with current branch\nonMounted(() => {\n  headBranch.value = props.currentBranch;\n});\n\n// Computed properties\nconst isValid = computed(() => {\n  return (\n    baseBranch.value &&\n    headBranch.value &&\n    title.value.trim() &&\n    baseBranch.value !== headBranch.value\n  );\n});\n\n// Form submission\nconst handleSubmit = async () => {\n  showValidation.value = true;\n\n  if (!isValid.value || loading.value) return;\n\n  loading.value = true;\n  try {\n    const result = await createNewPullRequest(\n      \"tiresomefanatic\",\n      \"heroechotemp\",\n      baseBranch.value,\n      headBranch.value,\n      title.value,\n      description.value\n    );\n\n    if (result) {\n      showToast({\n        title: \"Success\",\n        message: \"Pull request created successfully\",\n        type: \"success\",\n      });\n      emit(\"created\");\n    } else {\n      throw new Error(\"Failed to create pull request\");\n    }\n  } catch (error) {\n    console.error(\"Error creating pull request:\", error);\n    showToast({\n      title: \"Error\",\n      message:\n        error instanceof Error\n          ? error.message\n          : \"Failed to create pull request\",\n      type: \"error\",\n    });\n  } finally {\n    loading.value = false;\n  }\n};\n</script>\n\n<style scoped>\n.create-pr-form {\n  padding: 1.5rem;\n  background: white;\n  border-radius: 8px;\n  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);\n}\n\n.form-title {\n  font-size: 1.25rem;\n  font-weight: 600;\n  margin-bottom: 1.5rem;\n  color: #000;\n  padding-bottom: 0.5rem;\n  border-bottom: 1px solid #e5e7eb;\n}\n\n.form-group {\n  margin-bottom: 1.5rem;\n}\n\n.form-group label {\n  display: block;\n  margin-bottom: 0.5rem;\n  font-size: 0.9rem;\n  font-weight: 500;\n  color: #000;\n}\n\n.form-select,\n.form-input,\n.form-textarea {\n  width: 100%;\n  padding: 0.625rem;\n  border: 1px solid #e5e7eb;\n  border-radius: 6px;\n  background: white;\n  color: #000;\n  font-size: 0.9rem;\n  transition: border-color 0.2s, box-shadow 0.2s;\n}\n\n.form-select:hover,\n.form-input:hover,\n.form-textarea:hover {\n  border-color: #d1d5db;\n}\n\n.form-select:focus,\n.form-input:focus,\n.form-textarea:focus {\n  outline: none;\n  border-color: #2563eb;\n  box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);\n}\n\n.form-select:disabled,\n.form-input:disabled,\n.form-textarea:disabled {\n  background: #f3f4f6;\n  cursor: not-allowed;\n  opacity: 0.7;\n}\n\n.form-textarea {\n  resize: vertical;\n  min-height: 100px;\n}\n\n.helper-text {\n  display: block;\n  margin-top: 0.25rem;\n  font-size: 0.8rem;\n  color: #6b7280;\n}\n\n.validation-error {\n  display: block;\n  margin-top: 0.25rem;\n  font-size: 0.8rem;\n  color: #dc2626;\n}\n\n.validation-summary {\n  margin-bottom: 1rem;\n  padding: 1rem;\n  background: #fee2e2;\n  border: 1px solid #fecaca;\n  border-radius: 6px;\n  color: #991b1b;\n}\n\n.validation-summary p {\n  font-weight: 500;\n  margin-bottom: 0.5rem;\n}\n\n.validation-summary ul {\n  margin: 0;\n  padding-left: 1.5rem;\n}\n\n.validation-summary li {\n  font-size: 0.9rem;\n  margin-bottom: 0.25rem;\n}\n\n.form-actions {\n  display: flex;\n  justify-content: flex-end;\n  gap: 0.75rem;\n  margin-top: 2rem;\n  padding-top: 1rem;\n  border-top: 1px solid #e5e7eb;\n}\n\n.cancel-button,\n.submit-button {\n  padding: 0.625rem 1.25rem;\n  border-radius: 6px;\n  font-size: 0.9rem;\n  font-weight: 500;\n  cursor: pointer;\n  transition: all 0.2s;\n}\n\n.cancel-button {\n  background: white;\n  border: 1px solid #e5e7eb;\n  color: #374151;\n}\n\n.cancel-button:hover:not(:disabled) {\n  background: #f9fafb;\n  border-color: #d1d5db;\n}\n\n.submit-button {\n  background: #2563eb;\n  border: 1px solid #2563eb;\n  color: white;\n}\n\n.submit-button:hover:not(:disabled) {\n  background: #1d4ed8;\n  border-color: #1d4ed8;\n}\n\n.submit-button:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n\n@keyframes spin {\n  to {\n    transform: rotate(360deg);\n  }\n}\n</style>\n"],"version":3}