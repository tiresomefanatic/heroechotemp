import{n as p,I as u,C as _,D as v,o as e,c as o,a as t,J as f,K as g,t as d,_ as x,b as y,w as b,F as m,s as k}from"./CJMzKeSE.js";import{_ as w}from"./BArcnM6k.js";const C={class:"editor-container"},B={class:"editor-header"},E={class:"commit-history"},L={key:0,class:"loading"},A={key:1,class:"commits-list"},D={class:"commit-message"},$={class:"commit-meta"},N={class:"commit-author"},j={class:"commit-date"},z={key:2,class:"no-commits"},F=p({__name:"Editor",setup(h){const{accessToken:r}=u(),n=_([]),l=_(!1),a=async()=>{if(r.value){l.value=!0;try{const i=await fetch("https://api.github.com/repos/tiresomefanatic/heroechotemp/commits",{headers:{Authorization:`Bearer ${r.value}`,Accept:"application/vnd.github.v3+json"}});n.value=await i.json()}catch(i){console.error("Error fetching commits:",i)}finally{l.value=!1}}};return v(()=>{a()}),(i,s)=>(e(),o("div",C,[t("div",B,[s[1]||(s[1]=t("h2",{class:"text-xl font-bold"},"Editor",-1)),t("div",E,[s[0]||(s[0]=t("h3",{class:"text-lg"},"Recent Commits",-1)),l.value?(e(),o("div",L,"Loading commits...")):n.value.length?(e(),o("div",A,[(e(!0),o(f,null,g(n.value,c=>(e(),o("div",{key:c.sha,class:"commit-item"},[t("div",D,d(c.commit.message),1),t("div",$,[t("span",N,d(c.commit.author.name),1),t("span",j,d(new Date(c.commit.author.date).toLocaleDateString()),1)])]))),128))])):(e(),o("div",z,"No commits found"))])]),s[2]||(s[2]=t("div",{class:"editor-content"},null,-1))]))}}),G=x(F,[["__scopeId","data-v-ea25e5c2"]]),I={key:1,class:"unauthorized-message"},S={class:"text-center"},J={__name:"editor",setup(h){const{isAuthenticated:r,initiateLogin:n}=u();return(l,a)=>{const i=G,s=w;return e(),o("div",null,[y(s,null,{default:b(()=>[m(r)?(e(),k(i,{key:0})):(e(),o("div",I,[a[1]||(a[1]=t("p",{class:"text-xl text-center py-8"},"Please log in to access the editor.",-1)),t("div",S,[t("button",{onClick:a[0]||(a[0]=(...c)=>m(n)&&m(n)(...c)),class:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600"}," Login with GitHub ")])]))]),_:1})])}}};export{J as default};
