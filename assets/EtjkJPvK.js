import{f as A,g as S,h as b,i as c,m as v,j as N,k as z,l as m,_ as j,n as I,p as O,q,r as B,o as s,s as T,w as f,c as d,v as p,x as u,y as g,z as E,A as P,B as R,C as V,D,E as F,b as M,F as U,a as J,G as k,t as G}from"./CVyRco-N.js";const L=(e,r,n,a,t=!1)=>{const i=A(),o=S(),C=b(()=>{var h;const l=c(r),$=c(n),y=c(a);return v((l==null?void 0:l.strategy)||((h=o.ui)==null?void 0:h.strategy),y?{wrapper:y}:{},l||{},t?N(o.ui,e,{}):{},$||{})}),_=b(()=>z(i,["class"]));return{ui:C,attrs:_}},x={base:"invisible before:visible before:block before:rotate-45 before:z-[-1] before:w-2 before:h-2",ring:"before:ring-1 before:ring-gray-200 dark:before:ring-gray-800",rounded:"before:rounded-sm",background:"before:bg-gray-200 dark:before:bg-gray-800",shadow:"before:shadow",placement:"group-data-[popper-placement*='right']:-left-1 group-data-[popper-placement*='left']:-right-1 group-data-[popper-placement*='top']:-bottom-1 group-data-[popper-placement*='bottom']:-top-1"},w={container:"z-20 group",trigger:"flex items-center w-full",width:"w-full",height:"max-h-60",base:"relative focus:outline-none overflow-y-auto scroll-py-1",background:"bg-white dark:bg-gray-800",shadow:"shadow-lg",rounded:"rounded-md",padding:"p-1",ring:"ring-1 ring-gray-200 dark:ring-gray-700",empty:"text-sm text-gray-400 dark:text-gray-500 px-2 py-1.5",option:{base:"cursor-default select-none relative flex items-center justify-between gap-1",rounded:"rounded-md",padding:"px-1.5 py-1.5",size:"text-sm",color:"text-gray-900 dark:text-white",container:"flex items-center gap-1.5 min-w-0",active:"bg-gray-100 dark:bg-gray-900",inactive:"",selected:"pe-7",disabled:"cursor-not-allowed opacity-50",empty:"text-sm text-gray-400 dark:text-gray-500 px-2 py-1.5",icon:{base:"flex-shrink-0 h-5 w-5",active:"text-gray-900 dark:text-white",inactive:"text-gray-400 dark:text-gray-500"},selectedIcon:{wrapper:"absolute inset-y-0 end-0 flex items-center",padding:"pe-2",base:"h-5 w-5 text-gray-900 dark:text-white flex-shrink-0"},avatar:{base:"flex-shrink-0",size:"2xs"},chip:{base:"flex-shrink-0 w-2 h-2 mx-1 rounded-full"}},transition:{leaveActiveClass:"transition ease-in duration-100",leaveFromClass:"opacity-100",leaveToClass:"opacity-0"},popper:{placement:"bottom-end"},default:{selectedIcon:"i-heroicons-check-20-solid",trailingIcon:"i-heroicons-chevron-down-20-solid",empty:{label:"No options."},optionEmpty:{label:'No results for "{query}".'}},arrow:{...x,ring:"before:ring-1 before:ring-gray-200 dark:before:ring-gray-700",background:"before:bg-white dark:before:bg-gray-700"}};({...w,option:{...w.option},arrow:{...x}});const W={base:"",background:"bg-white dark:bg-gray-900",divide:"divide-y divide-gray-200 dark:divide-gray-800",ring:"ring-1 ring-gray-200 dark:ring-gray-800",rounded:"rounded-lg",shadow:"shadow",body:{base:"",background:"",padding:"px-4 py-5 sm:p-6"},header:{base:"",background:"",padding:"px-4 py-5 sm:px-6"},footer:{base:"",background:"",padding:"px-4 py-4 sm:px-6"}},H=v(m.ui.strategy,m.ui.card,W),K=I({inheritAttrs:!1,props:{as:{type:String,default:"div"},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},setup(e){const{ui:r,attrs:n}=L("card",O(e,"ui"),H),a=b(()=>q(B(r.value.base,r.value.rounded,r.value.divide,r.value.ring,r.value.shadow,r.value.background),e.class));return{ui:r,attrs:n,cardClass:a}}});function Q(e,r,n,a,t,i){return s(),T(P(e.$attrs.onSubmit?"form":e.as),E({class:e.cardClass},e.attrs),{default:f(()=>[e.$slots.header?(s(),d("div",{key:0,class:p([e.ui.header.base,e.ui.header.padding,e.ui.header.background])},[u(e.$slots,"header")],2)):g("",!0),e.$slots.default?(s(),d("div",{key:1,class:p([e.ui.body.base,e.ui.body.padding,e.ui.body.background])},[u(e.$slots,"default")],2)):g("",!0),e.$slots.footer?(s(),d("div",{key:2,class:p([e.ui.footer.base,e.ui.footer.padding,e.ui.footer.background])},[u(e.$slots,"footer")],2)):g("",!0)]),_:3},16,["class"])}const X=j(K,[["render",Q]]),Y={class:"flex min-h-screen items-center justify-center"},Z={key:0,class:"text-red-500"},ee={key:1},ae={__name:"callback",setup(e){const r=U(),n=R(),a=V(null);return D(async()=>{try{const t=n.query.code;if(!t){a.value="No authorization code provided";return}const o=await(await fetch(r.app.baseURL+"api/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:t})})).json();if(o.error){a.value=o.error_description||"Authentication failed";return}o.access_token&&(localStorage.setItem("github_token",o.access_token),F("/",{replace:!0}))}catch(t){a.value=t.message,console.error("Auth error:",t)}}),(t,i)=>{const o=X;return s(),d("div",Y,[M(o,null,{header:f(()=>i[0]||(i[0]=[J("h3",{class:"text-xl font-semibold"},"Authenticating...",-1)])),default:f(()=>[k(a)?(s(),d("p",Z,G(k(a)),1)):(s(),d("p",ee,"Please wait while we complete your authentication..."))]),_:1})])}}};export{ae as default};
