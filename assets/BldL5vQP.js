import{_ as b,C as $,o as p,c as f,a as s,b as e,w as i,d as a,v as r,P as c,e as E,G as I,H as T,F as _,t as C,s as V,y as k}from"./DwHgM4xR.js";import{_ as q,a as H}from"./BDcJLHx5.js";import j from"./BD67UB-W.js";import{u as z,q as G}from"./DTSW4rn-.js";import"./CqUuu-S0.js";import"./C-v3KzvZ.js";import"./BmlbPuZL.js";import"./CobJ7xyn.js";const U={class:"design-sidebar"},J={class:"design-nav"},K={class:"nav-content"},M={class:"nav-group"},Q={__name:"DesignSidebar",setup(S){const l=$({foundation:!1});function m(o){l.value[o]=!l.value[o]}return(o,t)=>{const d=E;return p(),f("aside",U,[s("nav",J,[s("div",K,[e(d,{to:"/design/foundation/introduction",class:r(["nav-item",{active:(o._.provides[c]||o.$route).path==="/design/foundation/introduction"}])},{default:i(()=>t[1]||(t[1]=[a("Overview")])),_:1},8,["class"]),s("div",M,[s("div",{class:"nav-group-header",onClick:t[0]||(t[0]=y=>m("foundation"))},[t[2]||(t[2]=a(" Foundation ")),s("span",{class:r(["arrow",{rotated:!l.value.foundation}])},"▼",2)]),s("div",{class:r(["nav-group-content",{collapsed:l.value.foundation}])},[e(d,{to:"/design/foundation/logo",class:r(["nav-item",{active:(o._.provides[c]||o.$route).path==="/design/foundation/logo"}])},{default:i(()=>t[3]||(t[3]=[a("Logo")])),_:1},8,["class"]),e(d,{to:"/design/foundation/color",class:r(["nav-item",{active:(o._.provides[c]||o.$route).path==="/design/foundation/color"}])},{default:i(()=>t[4]||(t[4]=[a("Color")])),_:1},8,["class"]),e(d,{to:"/design/foundation/typography",class:r(["nav-item",{active:(o._.provides[c]||o.$route).path==="/design/foundation/typography"}])},{default:i(()=>t[5]||(t[5]=[a("Typography")])),_:1},8,["class"]),e(d,{to:"/design/foundation/icons",class:r(["nav-item",{active:(o._.provides[c]||o.$route).path==="/design/foundation/icons"}])},{default:i(()=>t[6]||(t[6]=[a("Icons")])),_:1},8,["class"]),e(d,{to:"/design/foundation/layout",class:r(["nav-item",{active:(o._.provides[c]||o.$route).path==="/design/foundation/layout"}])},{default:i(()=>t[7]||(t[7]=[a("Layout")])),_:1},8,["class"]),e(d,{to:"/design/foundation/imagery",class:r(["nav-item",{active:(o._.provides[c]||o.$route).path==="/design/foundation/imagery"}])},{default:i(()=>t[8]||(t[8]=[a("Imagery")])),_:1},8,["class"]),e(d,{to:"/design/foundation/animation",class:r(["nav-item",{active:(o._.provides[c]||o.$route).path==="/design/foundation/animation"}])},{default:i(()=>t[9]||(t[9]=[a("Animation")])),_:1},8,["class"]),e(d,{to:"/design/foundation/applications",class:r(["nav-item",{active:(o._.provides[c]||o.$route).path==="/design/foundation/applications"}])},{default:i(()=>t[10]||(t[10]=[a("Applications")])),_:1},8,["class"])],2)])])])])}}},W=b(Q,[["__scopeId","data-v-9b96e427"]]),X={class:"page-wrapper"},Y={key:0},Z={key:1},x={key:0},tt={class:"site-header"},ot={class:"header-content"},nt={class:"main-nav"},et={key:0,class:"sidebar"},st={class:"main-content"},at={class:"content-header"},it={key:0,class:"editor-container"},dt={key:1,class:"prose"},rt={__name:"[...slug]",async setup(S){let l,m;const t=I().params.slug||[],d=Array.isArray(t)?t.join("/"):t,{data:y,pending:A,error:w,refresh:D}=([l,m]=T(()=>z(`content-${d}`,()=>G("design",d).findOne())),l=await l,m(),l),h=$(""),v=$(!1);async function N(){try{const u=`design/${d}.md`;console.log("Fetching raw content from:",u);const n=await $fetch("/api/raw-content",{params:{path:u}});console.log("Raw content fetched:",n.content),h.value=n.content}catch(u){console.error("Error fetching raw content:",u)}}async function O(){v.value=!v.value,v.value&&await N()}const P=u=>{h.value=u},F=async u=>{try{const n=`design/${d}.md`;if(console.log("Saving content to:",n),(await $fetch("/api/raw-content",{method:"POST",body:{path:n,content:u}})).success)alert("Content saved successfully!"),v.value=!1,await D();else throw new Error("Failed to save content")}catch(n){console.error("Error saving:",n),alert("Failed to save content")}};return(u,n)=>{const g=E,L=H,R=j,B=q;return p(),f("div",X,[_(A)?(p(),f("div",Y,"Loading...")):_(w)?(p(),f("div",Z,C(_(w)),1)):(p(),V(B,{key:2},{default:i(()=>[_(y)?(p(),f("div",x,[s("header",tt,[s("div",ot,[e(g,{to:"/",class:"logo"},{default:i(()=>n[0]||(n[0]=[a("ECHO"),s("span",{class:"logo-dot"},"•",-1)])),_:1}),s("nav",nt,[e(g,{to:"/design",class:"active"},{default:i(()=>n[1]||(n[1]=[a("Design")])),_:1}),e(g,{to:"/develop"},{default:i(()=>n[2]||(n[2]=[a("Develop")])),_:1}),e(g,{to:"/contribute"},{default:i(()=>n[3]||(n[3]=[a("Contribute")])),_:1}),e(g,{to:"/opinions"},{default:i(()=>n[4]||(n[4]=[a("Opinions")])),_:1})]),n[5]||(n[5]=s("div",{class:"search-box"},[s("input",{type:"text",placeholder:"Search"})],-1))])]),s("div",{class:r(["content-area",{"editing-mode":v.value}])},[v.value?k("",!0):(p(),f("aside",et,[e(W)])),s("div",st,[s("div",at,[s("button",{onClick:O,class:"edit-button"},C(v.value?"Preview":"Edit"),1)]),v.value?(p(),f("div",it,[e(L,{content:h.value,"onUpdate:content":P,onSave:F},null,8,["content"])])):(p(),f("div",dt,[e(R,{value:_(y)},null,8,["value"])]))])],2)])):k("",!0)]),_:1}))])}}},mt=b(rt,[["__scopeId","data-v-ca98a217"]]);export{mt as default};
